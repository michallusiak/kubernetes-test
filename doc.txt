## -------
## Cluster
## -------

# Create a new cluster:
$ minikube start --nodes 3 --profile k8s --driver=docker

# List all available minikube profiles (clusters):
$ minikube profile list

# Switch to a specific profile (cluster):
$ minikube profile <PROFILE / CLUSTER_NAME>

# Check active cluster:
$ kubectl config current-context

# List all nodes in active cluster:
$ kubectl get nodes

# View the cluster events:
$ kubectl get events

# View kubectl configuration:
$ kubectl config view

# Stopping the cluster:
$ minikube stop <CLUSTER_NAME>

# Remove the current cluster:
$ minikube delete

## ----------
## Namespaces
## ----------

# List all namespaces:
$ --all-namespaces / -A

# list a specific namespace:
$ --namespace=<NAMESPACE> / -n

## -----
## Nodes
## -----

# Label nodes:
$ kubectl label node <NODE_NAME> node-role.kubernetes.io/worker=worker

# List nodes:
$ kubectl get nodes

## ----
## Pods
## ----

# List detailed information about pods:
$ kubectl get pods -o wide

# View application logs for a container in a pod:
$ kubectl logs <CONTAINER_NAME>

## -------
# Services
## -------

# View the Services:
$ kubectl get services

## --------------
# Minikube addons
## --------------

# List the currently supported addons:
$ minikube addons list

# Enable an addon:
$ minikube addons enable <ADDON_NAME>

# Disable an addon:
$ minikube addons disable <ADDON_NAME>

## ---------
## Dashboard
## ---------

$ minikube dashboard --url

# To use SSM make sure you have the following attached to your EC2 instance:
#
# Role: e.g. SSMRoleForEC2
# Policy: AmazonSSMManagedInstanceCore

# http://127.0.0.1:8080/api/v1/namespaces/kubernetes-dashboard/services/http:kubernetes-dashboard:/proxy/

$ aws ssm start-session \
    --target i-0d28cd28e8fb820fd \
    --document-name AWS-StartPortForwardingSession \
    --parameters '{"portNumber":["35481"], "localPortNumber":["8080"]}'

# SSH Tunneling:
# ssh -L 34197:127.0.0.1:34197 john@server_ip